<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Brawler Counterpick Calculator</title>

<script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>

<style>
    html,body{height:100%;margin:0}
    body{
        display:flex;flex-direction:column;justify-content:center;align-items:center;
        font-family:'Segoe UI',Roboto,Arial,sans-serif;
        background:#222 url('https://images.unsplash.com/photo-1746118335815-466205f26884?q=80&w=968&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D') center/cover no-repeat fixed;
        color:#f8f8f8;text-align:center;padding:2rem 1rem;box-sizing:border-box
    }
    .card{
        background:rgba(0,0,0,.65);
        backdrop-filter:blur(6px);
        border-radius:12px;
        padding:2.5rem 3rem;max-width:720px;width:100%;
        box-shadow:0 0 18px rgba(0,0,0,.45)
    }
    h1{margin-top:0;margin-bottom:1.25rem;text-shadow:0 0 8px rgba(0,0,0,.5)}

    label{display:block;margin:.5rem 0 .25rem;font-weight:600}
    input[type=text]{
        margin-left: -1rem;
        width:100%;padding:.65rem 1rem;font-size:1rem;
        border-radius:8px;border:none;margin-bottom:1rem
    }
    button{
        padding:.8rem 2.25rem;font-size:1.1rem;font-weight:700;
        border:0;border-radius:8px;background:#ffca28;color:#111;cursor:pointer;
        transition:transform .1s ease
    }
    button:hover{transform:scale(1.04)}
    input[type=file]{margin:1.5rem 0 0}

    pre{
        white-space:pre-wrap;background:#111a;padding:1rem 1.5rem;
        border-radius:8px;margin-top:1.75rem;max-height:60vh;overflow:auto
    }
    .footer{margin-top:2rem;font-size:.75rem;opacity:.8}
</style>
</head>
<body>
<div class="card">
    <h1>Brawler Counterpick Calculator</h1>

    <label for="b1">Brawler&nbsp;1</label>
    <input id="b1" type="text" list="brawlers" autocomplete="off">

    <label for="b2">Brawler&nbsp;2</label>
    <input id="b2" type="text" list="brawlers" autocomplete="off">

    <label for="b3">Brawler&nbsp;3&nbsp;</label>
    <input id="b3" type="text" list="brawlers" autocomplete="off">

    <datalist id="brawlers"></datalist>

    <button id="go">Go</button>

    <pre id="output"></pre>

</div>

<script>
const brawlerNames = [
"8bit","Amber","Angelo","Ash","Barley","Bea","Belle","Berry","Bibi","Bo","Bonnie","Brock",
"Bull","Buster","Buzz","Byron","Carl","Charlie","Chester","Chuck","Clancy","Colette","Colt",
"Cordelius","Crow","Darryl","Doug","Draco","Dynamike","Edgar","El Primo","Emz","Eve","Fang",
"Frank","Gale","Gene","Gray","Griff","Grom","Gus","Hank","Jacky","Janet","Jesse","Juju","Kaze",
"Kenji","Kit","Larry","Leon","Lily","Lola","Lou","Maisie","Mandy","Max","Meple","Meg",
"Melodie","Mico","Moe","Mortis","Mr P","Nani","Nita","Otis","Pam","Pearl","Penny","Piper",
"Poco","RT","Rico","Rosa","Ruffs","Sam","Sandy","Shade","Shelly","Spike","Sprout","Squeak",
"Stu","Surge","Tara","Tick","Willow"
];

document.addEventListener("DOMContentLoaded",()=>{
  const dl = document.getElementById("brawlers");
  brawlerNames.forEach(n=>{const o=document.createElement("option");o.value=n;dl.appendChild(o)});
});

const pyReady = (async ()=>{
  const pyodide = await loadPyodide();
  await pyodide.loadPackage("micropip");
  const resp = await fetch("pycode.py");
  if (!resp.ok) throw new Error("Failed to load python code.")
  const pythonSrc = await resp.text();
  pyodide.runPython(pythonSrc);
  return pyodide;
})();

const outputEl = document.getElementById("output");
async function runCalc(){
  console.group("runCalc ▶️");
  const py = await pyReady;
  console.log("✅ pyReady resolved", py);
  const calc = py.globals.get('calculate');
  const result = calc([
    document.getElementById("b1").value,
    document.getElementById("b2").value,
    document.getElementById("b3").value
  ]);
  outputEl.textContent = result;
}

document.getElementById("go").addEventListener("click",runCalc);
["b1","b2","b3"].forEach(id=>{
  document.getElementById(id).addEventListener("keydown",e=>{
    if(e.key==="Enter"){runCalc()}
  });
});

</script>
</body>
</html>
